<!DOCTYPE html>
<html>
<head>
    <title>Debug Frontend Tool Count</title>
</head>
<body>
    <h1>Tool Count Debug</h1>
    <div id="results"></div>
    
    <script>
        async function checkToolCount() {
            try {
                console.log('ğŸ” å¼€å§‹æ£€æŸ¥å·¥å…·æ•°é‡...');
                
                // æ£€æŸ¥APIè¿”å›
                const response = await fetch('http://localhost:3002/api/tools');
                const apiTools = await response.json();
                console.log('ğŸ“Š APIè¿”å›å·¥å…·æ•°é‡:', apiTools.length);
                
                // æ£€æŸ¥æ˜¯å¦æœ‰æ— æ•ˆå·¥å…·
                const validTools = apiTools.filter(tool => 
                    tool && 
                    tool.name && 
                    tool.description && 
                    tool.url &&
                    tool.category
                );
                console.log('âœ… æœ‰æ•ˆå·¥å…·æ•°é‡:', validTools.length);
                
                // æ£€æŸ¥æ¯ä¸ªåˆ†ç±»çš„å·¥å…·æ•°é‡
                const categoryCount = {};
                validTools.forEach(tool => {
                    const category = tool.category || 'æœªåˆ†ç±»';
                    categoryCount[category] = (categoryCount[category] || 0) + 1;
                });
                
                console.log('ğŸ“ˆ åˆ†ç±»åˆ†å¸ƒ:');
                Object.entries(categoryCount).forEach(([category, count]) => {
                    console.log(`  - ${category}: ${count} ä¸ªå·¥å…·`);
                });
                
                // æ£€æŸ¥æ˜¯å¦æœ‰é‡å¤çš„å·¥å…·
                const toolNames = validTools.map(tool => tool.name);
                const uniqueNames = new Set(toolNames);
                const duplicates = toolNames.length - uniqueNames.size;
                console.log('ğŸ”„ é‡å¤å·¥å…·æ•°é‡:', duplicates);
                
                // æ˜¾ç¤ºç»“æœ
                document.getElementById('results').innerHTML = `
                    <h2>æ£€æŸ¥ç»“æœ</h2>
                    <p><strong>APIè¿”å›:</strong> ${apiTools.length} ä¸ªå·¥å…·</p>
                    <p><strong>æœ‰æ•ˆå·¥å…·:</strong> ${validTools.length} ä¸ªå·¥å…·</p>
                    <p><strong>é‡å¤å·¥å…·:</strong> ${duplicates} ä¸ª</p>
                    <p><strong>å”¯ä¸€å·¥å…·:</strong> ${uniqueNames.size} ä¸ª</p>
                    <h3>åˆ†ç±»åˆ†å¸ƒ</h3>
                    <ul>
                        ${Object.entries(categoryCount).map(([cat, count]) => 
                            `<li>${cat}: ${count} ä¸ªå·¥å…·</li>`
                        ).join('')}
                    </ul>
                `;
                
            } catch (error) {
                console.error('âŒ æ£€æŸ¥å¤±è´¥:', error);
                document.getElementById('results').innerHTML = `<p>æ£€æŸ¥å¤±è´¥: ${error.message}</p>`;
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
        window.addEventListener('load', checkToolCount);
    </script>
</body>
</html>
