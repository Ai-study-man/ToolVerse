<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AdSense æµè§ˆå™¨æ£€æŸ¥å·¥å…·</title>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4372695356377122" crossorigin="anonymous"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .check-item { margin: 10px 0; padding: 10px; border-radius: 4px; }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .warning { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        .ad-container { border: 2px dashed #ccc; padding: 20px; margin: 20px 0; text-align: center; min-height: 200px; }
        button { background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; margin: 5px; }
        button:hover { background: #0056b3; }
        pre { background: #f8f9fa; padding: 10px; border-radius: 4px; overflow-x: auto; font-size: 12px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” AdSense æµè§ˆå™¨æ£€æŸ¥å·¥å…·</h1>
        
        <div id="results"></div>
        
        <h2>ğŸ“ æµ‹è¯•å¹¿å‘Šä½</h2>
        <div class="ad-container">
            <p>å¹¿å‘Šåº”è¯¥æ˜¾ç¤ºåœ¨è¿™é‡Œ â†“</p>
            <!-- æµ‹è¯•å¹¿å‘Š -->
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-4372695356377122"
                 data-ad-slot="1234567890"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
        </div>
        
        <div style="margin-top: 20px;">
            <button onclick="runChecks()">ğŸ”„ é‡æ–°æ£€æŸ¥</button>
            <button onclick="clearResults()">ğŸ—‘ï¸ æ¸…é™¤ç»“æœ</button>
            <button onclick="testAdLoad()">ğŸ¯ æµ‹è¯•å¹¿å‘ŠåŠ è½½</button>
        </div>
        
        <h3>ğŸ“Š å®æ—¶æ§åˆ¶å°æ—¥å¿—</h3>
        <pre id="console-log"></pre>
    </div>

    <script>
        let logContainer = document.getElementById('console-log');
        let originalLog = console.log;
        let originalError = console.error;
        let originalWarn = console.warn;
        
        // åŠ«æŒæ§åˆ¶å°è¾“å‡º
        function interceptConsole() {
            console.log = function(...args) {
                logContainer.textContent += `[LOG] ${args.join(' ')}\n`;
                logContainer.scrollTop = logContainer.scrollHeight;
                originalLog.apply(console, args);
            };
            
            console.error = function(...args) {
                logContainer.textContent += `[ERROR] ${args.join(' ')}\n`;
                logContainer.scrollTop = logContainer.scrollHeight;
                originalError.apply(console, args);
            };
            
            console.warn = function(...args) {
                logContainer.textContent += `[WARN] ${args.join(' ')}\n`;
                logContainer.scrollTop = logContainer.scrollHeight;
                originalWarn.apply(console, args);
            };
        }
        
        function addResult(message, type = 'info') {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = `check-item ${type}`;
            div.innerHTML = message;
            results.appendChild(div);
        }
        
        function clearResults() {
            document.getElementById('results').innerHTML = '';
            logContainer.textContent = '';
        }
        
        function runChecks() {
            clearResults();
            console.log('ğŸš€ å¼€å§‹ AdSense æ£€æŸ¥...');
            
            // 1. æ£€æŸ¥æµè§ˆå™¨ç¯å¢ƒ
            addResult(`ğŸŒ æµè§ˆå™¨: ${navigator.userAgent}`, 'success');
            addResult(`ğŸª Cookieå¯ç”¨: ${navigator.cookieEnabled ? 'æ˜¯' : 'å¦'}`, navigator.cookieEnabled ? 'success' : 'error');
            addResult(`ğŸ“¡ ç½‘ç»œçŠ¶æ€: ${navigator.onLine ? 'åœ¨çº¿' : 'ç¦»çº¿'}`, navigator.onLine ? 'success' : 'error');
            
            // 2. æ£€æŸ¥AdSenseè„šæœ¬
            const adsenseScript = document.querySelector('script[src*="googlesyndication.com"]');
            if (adsenseScript) {
                addResult('âœ… AdSenseè„šæœ¬å·²åŠ è½½', 'success');
                console.log('AdSenseè„šæœ¬URL:', adsenseScript.src);
            } else {
                addResult('âŒ AdSenseè„šæœ¬æœªæ‰¾åˆ°', 'error');
            }
            
            // 3. æ£€æŸ¥adsbygoogleå¯¹è±¡
            setTimeout(() => {
                if (window.adsbygoogle) {
                    addResult(`âœ… adsbygoogleå¯¹è±¡å­˜åœ¨ (é•¿åº¦: ${window.adsbygoogle.length})`, 'success');
                    console.log('adsbygoogleæ•°ç»„:', window.adsbygoogle);
                } else {
                    addResult('âŒ adsbygoogleå¯¹è±¡ä¸å­˜åœ¨', 'error');
                }
            }, 1000);
            
            // 4. æ£€æŸ¥å¹¿å‘Šå®¹å™¨
            const adContainers = document.querySelectorAll('.adsbygoogle');
            addResult(`ğŸ“¦ æ‰¾åˆ° ${adContainers.length} ä¸ªå¹¿å‘Šå®¹å™¨`, adContainers.length > 0 ? 'success' : 'warning');
            
            adContainers.forEach((container, index) => {
                const client = container.getAttribute('data-ad-client');
                const slot = container.getAttribute('data-ad-slot');
                addResult(`å¹¿å‘Šä½ ${index + 1}: å®¢æˆ·ç«¯=${client}, ä½ç½®=${slot}`, slot === '1234567890' ? 'warning' : 'success');
            });
            
            // 5. æ£€æŸ¥ç½‘ç»œè¿æ¥
            fetch('https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js', { method: 'HEAD', mode: 'no-cors' })
                .then(() => addResult('âœ… AdSenseæœåŠ¡å™¨è¿æ¥æ­£å¸¸', 'success'))
                .catch(err => {
                    addResult('âŒ AdSenseæœåŠ¡å™¨è¿æ¥å¤±è´¥: ' + err.message, 'error');
                    console.error('ç½‘ç»œé”™è¯¯:', err);
                });
            
            // 6. æ£€æŸ¥å¹¿å‘Šæ‹¦æˆªå™¨
            const testDiv = document.createElement('div');
            testDiv.innerHTML = '&nbsp;';
            testDiv.className = 'adsbox';
            testDiv.style.position = 'absolute';
            testDiv.style.left = '-9999px';
            document.body.appendChild(testDiv);
            
            setTimeout(() => {
                if (testDiv.offsetHeight === 0) {
                    addResult('âŒ æ£€æµ‹åˆ°å¹¿å‘Šæ‹¦æˆªå™¨', 'error');
                } else {
                    addResult('âœ… æœªæ£€æµ‹åˆ°å¹¿å‘Šæ‹¦æˆªå™¨', 'success');
                }
                document.body.removeChild(testDiv);
            }, 500);
        }
        
        function testAdLoad() {
            console.log('ğŸ¯ æµ‹è¯•å¹¿å‘ŠåŠ è½½...');
            if (window.adsbygoogle) {
                try {
                    window.adsbygoogle.push({});
                    addResult('ğŸ¯ å¹¿å‘ŠåŠ è½½è¯·æ±‚å·²å‘é€', 'success');
                    console.log('å¹¿å‘Šæ¨é€å®Œæˆ');
                } catch (error) {
                    addResult('âŒ å¹¿å‘ŠåŠ è½½å¤±è´¥: ' + error.message, 'error');
                    console.error('å¹¿å‘ŠåŠ è½½é”™è¯¯:', error);
                }
            } else {
                addResult('âŒ adsbygoogleä¸å¯ç”¨', 'error');
            }
        }
        
        // åˆå§‹åŒ–
        interceptConsole();
        
        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨æ£€æŸ¥
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', runChecks);
        } else {
            runChecks();
        }
        
        // 5ç§’åå°è¯•åŠ è½½å¹¿å‘Š
        setTimeout(() => {
            console.log('â° 5ç§’åè‡ªåŠ¨æµ‹è¯•å¹¿å‘ŠåŠ è½½...');
            testAdLoad();
        }, 5000);
    </script>
</body>
</html>
